!function($,window,document,FTVi){function popinGenerate(){var today=new Date,dayNumber=today.getDay(),displayPopin=!0,typePopin="Newsletter",cookieDate="",cookiePageView=0;if(1==FTVi.Conf.newsletter.displayPopin){if(today=today.getDate()+"-"+(9>=today.getMonth()+1?"0"+(today.getMonth()+1):today.getMonth()+1)+"-"+today.getFullYear(),FTVi.Tools.cookie.readCookie("popin")){var cookie=unescape(FTVi.Tools.cookie.readCookie("popin"));cookie=cookie.split("|"),cookieDate=cookie[0],cookiePageView=2==cookie.length?parseInt(cookie[1]):0}6==dayNumber||0==dayNumber?cookieDate==today&&(displayPopin=!1):(FTVi.Tools.cookie.readCookie("popin-week")||cookieDate!=today||cookieDate==today&&1!=cookiePageView)&&(displayPopin=!1),typePopin="Newsletter";var url=new String(window.location.pathname);new RegExp("/abonnement.html/*$","gi").test(url)&&(displayPopin=!1),FTVi.Tools.hasXtor(FTVi.Conf.push.content.xtor)&&(displayPopin=!1),displayPopin&&(eval("FTVi.Popin.generate"+typePopin+"()"),6==dayNumber&&0==dayNumber||FTVi.Tools.cookie.createCookie("popin-week",today,604800)),FTVi.Tools.cookie.createCookie("popin",today+"|"+(cookiePageView+1),86400)}}function popinGenerateNewsletter(){$("body").append('<div style="opacity: 100; height: 100%;" id="newsletterSubContainer">    <div class="newsletterSubBlock">        <a onclick="$(\'#newsletterSubContainer\').remove(); return false;" href="#" class="close"></a>        <div class="title">S\'abonner aux newsletters et aux alertes mails</div>        <div class="colLeft"><b>Nos newsletters<br>info et vidéo</b><div class="imgContainer"><img src="/skin/1.2.255/www/img/newsletter/popin/icn_nls.png" alt=""></div><p>Tous les jours, recevez gratuitement<br>l\'actu et les vidéos du jour</p></div>        <div class="colRight"><b>Alerte info</b><div class="imgContainer"><img src="/skin/1.2.255/www/img/newsletter/popin/icn_alert.png" alt=""></div><p>Suivez l’actualité en temps réel<br>avec les flash info de la rédaction</p></div>        <div style="clear: both;"></div>        <div class="listOnOff">          <div class="toggleLine">            <span class="toggleText">Chaque matin, à 7h30, recevez les principales informations du jour</span>            <div class="onoffswitch-nl">              <input type="checkbox" name="onoffswitch-nl" class="onoffswitch-checkbox-nl" id="myonoffswitch-nl">              <label class="onoffswitch-label-nl" for="myonoffswitch-nl">                <div class="onoffswitch-inner-nl"></div>                <div class="onoffswitch-switch-nl"></div>              </label>            </div>          </div>          <div class="toggleLine">            <span class="toggleText">Chaque après-midi à 16h, retrouvez les vidéos incontournables</span>            <div class="onoffswitch-video">              <input type="checkbox" name="onoffswitch-video" class="onoffswitch-checkbox-video" id="myonoffswitch-video">              <label class="onoffswitch-label-video" for="myonoffswitch-video">                <div class="onoffswitch-inner-video"></div>                <div class="onoffswitch-switch-video"></div>              </label>            </div>          </div>          <div class="toggleLine">            <span class="toggleText">L\'actualité en temps réel avec les alertes e-mails de la rédaction</span>            <div class="onoffswitch-alert">              <input type="checkbox" name="onoffswitch-alert" class="onoffswitch-checkbox-alert" id="myonoffswitch-alert">              <label class="onoffswitch-label-alert" for="myonoffswitch-alert">                <div class="onoffswitch-inner-alert"></div>                <div class="onoffswitch-switch-alert"></div>              </label>            </div>          </div>        </div>        <div class="form">            <input type="text" id="popinEmail" name="popinEmail" onfocus="if (this.value==\'Votre adresse e-mail\') {this.value=\'\'}" onblur="if(this.value==\'\'){this.value=\'Votre adresse e-mail\'}" value="Votre adresse e-mail" class="txtInput" />            <input name="abonner" type="button" value="s\'abonner" class="button" id="newsSubButton" />        </div>        <div id="popinMessage" class="inscription" style="display: none;"></div>        <div class="inscription inscription-rgpd">France Télévisions utilise votre adresse email afin de vous adresser des newsletters. Pour exercer vos droits, <a href="https://www.france.tv/services/aide-contact.html" target="_blank">contactez-nous</a>. Pour en savoir plus, <a href="https://www.francetelevisions.fr/groupe/confidentialite" target="_blank">cliquez ici</a>.</div>    </div></div>'),$("#newsletterSubContainer #newsSubButton").click(function(){popinSubscribeNewsletter()}),document.getElementById("newsletterSubContainer").addEventListener("click",function(e){e.target==this&&this.parentElement.removeChild(this)})}function popinSubscribeNewsletter(){FTVi.Popin.returns=new Array,FTVi.Popin.nbCallbackCalled=0,$("#newsletterSubContainer #popinMessage").empty(),$("#newsletterSubContainer #popinMessage").css("display","none"),$("#newsletterSubContainer #popinMessage").removeClass();var e=new Array("nl","video","alert");FTVi.Popin.nbSubscribe=0;for(var i=0;i<e.length;i++)$("#myonoffswitch-"+e[i]).is(":checked")&&FTVi.Popin.nbSubscribe++;$("#newsletterSubContainer #newsSubButton").unbind("click"),$("#newsletterSubContainer #newsSubButton").attr("value","...");var n=!1,t=$("#newsletterSubContainer #popinEmail").val();if(""==t)$("#newsletterSubContainer #popinMessage").append("Veuillez saisir une adresse email."),$("#newsletterSubContainer #popinMessage").addClass("error"),$("#newsletterSubContainer #popinMessage").fadeIn("slow"),$("#newsletterSubContainer #newsSubButton").attr("value","S'abonner"),$("#newsletterSubContainer #newsSubButton").click(function(){popinSubscribeNewsletter()});else if(0==FTVi.Popin.nbSubscribe)$("#newsletterSubContainer #popinMessage").append("Vous devez sélectionner au moins 1 abonnement"),$("#newsletterSubContainer #popinMessage").addClass("error"),$("#newsletterSubContainer #popinMessage").fadeIn("slow"),$("#newsletterSubContainer #newsSubButton").attr("value","S'abonner"),$("#newsletterSubContainer #newsSubButton").click(function(){popinSubscribeNewsletter()});else if(t.match("^[A-Za-z0-9](([_.-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([.-]?[a-zA-Z0-9]+)*).([A-Za-z]{2,})$")||(n=!0),1==n)$("#newsletterSubContainer #popinMessage").append("Veuillez saisir une adresse email correcte."),$("#newsletterSubContainer #popinMessage").addClass("error"),$("#newsletterSubContainer #popinMessage").fadeIn("slow"),$("#newsletterSubContainer #newsSubButton").attr("value","S'abonner"),$("#newsletterSubContainer #newsSubButton").click(function(){popinSubscribeNewsletter()});else{$("#newsletterSubContainer #popinMessage").fadeOut("slow");var s=new Date,a="popin-"+s.getDate()+"-"+(s.getMonth()+1)+"-"+s.getFullYear();$("#myonoffswitch-nl").is(":checked")&&$.ajax({type:"POST",url:FTVi.Conf.newsletter.subscribe,data:{email:t,provenance:a},async:!1,success:popinSubscribeCallbackNewsletter}),$("#myonoffswitch-video").is(":checked")&&$.ajax({type:"POST",url:FTVi.Conf.newsletterVideo.subscribe,data:{email:t,provenance:a},async:!1,success:popinSubscribeCallbackNewsletter}),$("#myonoffswitch-alert").is(":checked")&&$.ajax({type:"POST",url:FTVi.Conf.breakingNews.subscribe,data:{email:t,provenance:a},async:!1,success:popinSubscribeCallbackNewsletter}),$("#myonoffswitch-alertPres").is(":checked")&&$.ajax({type:"POST",url:FTVi.Conf.newsletterLegislatives.subscribe,data:{email:t,provenance:a},async:!1,success:popinSubscribeCallbackNewsletter})}}function popinSubscribeCallbackNewsletter(e){if(FTVi.Popin.nbCallbackCalled++,FTVi.Popin.returns.push(e.status),FTVi.Popin.nbCallbackCalled==FTVi.Popin.nbSubscribe){for(var i=!0,n=0;n<FTVi.Popin.nbSubscribe;n++)"NOK"!=FTVi.Popin.returns[n]&&(i=!1);if(i)$("#newsletterSubContainer #popinMessage").html("Un problème est survenu lors de votre inscription. Merci de réessayer ultérieurement."),$("#newsletterSubContainer #popinMessage").addClass("error");else{for(i=!0,n=0;n<FTVi.Popin.nbSubscribe;n++)"EXIST"!=FTVi.Popin.returns[n]&&(i=!1);i?($("#newsletterSubContainer #popinMessage").html("Vous êtes déjà inscrit"),$("#newsletterSubContainer #popinMessage").addClass("error")):($("#newsletterSubContainer #popinMessage").html("Inscription réussie."),$("#newsletterSubContainer #popinMessage").addClass("success"))}$("#newsletterSubContainer #popinMessage").fadeIn("slow"),"OK"!=FTVi.Popin.returns[0]&&"OK"!=FTVi.Popin.returns[1]||$("#newsletterSubContainer").delay(2500).fadeOut("slow"),$("#newsletterSubContainer #newsSubButton").attr("value","S'abonner"),$("#newsletterSubContainer #newsSubButton").click(function(){popinSubscribeNewsletter()})}}function popinGenerateAlert(){if(0==$(".alert-box").length){'<div style="opacity: 100; height: 100%;" id="newsletterSubContainer" class="alert-box">','    <div class="newsletterSubBlock">','        <a onclick="$(\'#newsletterSubContainer\').remove(); return false;" href="#" class="close"></a>','        <div class="title">S\'abonner aux alertes mails</div>','        <div class="colLeft"><div class="imgContainer"><img src="/skin/www/img/newsletter/popin/icn_alert.png" alt=""></div></div>','        <div class="colRight"><p>Suivez l’actualité en temps réel avec les flash info de la rédaction</p></div>','        <div style="clear: both;"></div>','        <div class="form">','            <input type="text" id="popinEmail" name="popinEmail" onfocus="if (this.value==\'Votre adresse e-mail\') {this.value=\'\'}" onblur="if(this.value==\'\'){this.value=\'Votre adresse e-mail\'}" value="Votre adresse e-mail" class="txtInput" />','            <input name="abonner" type="button" value="s\'abonner" class="button" id="newsSubButton" />',"        </div>",'        <div id="popinMessage" class="inscription" style="display: none;"></div>',"    </div>","</div>",$("body").append('<div style="opacity: 100; height: 100%;" id="newsletterSubContainer" class="alert-box">    <div class="newsletterSubBlock">        <a onclick="$(\'#newsletterSubContainer\').remove(); return false;" href="#" class="close"></a>        <div class="title">S\'abonner aux alertes mails</div>        <div class="colLeft"><div class="imgContainer"><img src="/skin/www/img/newsletter/popin/icn_alert.png" alt=""></div></div>        <div class="colRight"><p>Suivez l’actualité en temps réel avec les flash info de la rédaction</p></div>        <div style="clear: both;"></div>        <div class="form">            <input type="text" id="popinEmail" name="popinEmail" onfocus="if (this.value==\'Votre adresse e-mail\') {this.value=\'\'}" onblur="if(this.value==\'\'){this.value=\'Votre adresse e-mail\'}" value="Votre adresse e-mail" class="txtInput" />            <input name="abonner" type="button" value="s\'abonner" class="button" id="newsSubButton" />        </div>        <div id="popinMessage" class="inscription" style="display: none;"></div>    </div></div>'),$(".alert-box #newsSubButton").click(function(){popinSubscribeAlert()})}}function popinSubscribeAlert(){var e=$(".alert-box"),i=$(e.find("#popinMessage")[0]),n=$(e.find("#newsSubButton")[0]);i.css("display","none"),i.html(""),i.removeClass(),n.unbind("click"),n.attr("value","...");var t=$(e.find("#popinEmail")[0]).val();""==t?(i.html("Veuillez saisir une adresse email."),i.addClass("error"),i.fadeIn("slow"),n.attr("value","S'abonner"),n.click(function(){popinSubscribeAlert()})):t.match("^[A-Za-z0-9](([_.-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([.-]?[a-zA-Z0-9]+)*).([A-Za-z]{2,})$")?$.ajax({type:"POST",url:FTVi.Conf.breakingNews.subscribe,data:{email:t,provenance:"alert"},async:!1,success:popinSubscribeAlertCallback}):(i.html("Veuillez saisir une adresse email correcte."),i.addClass("error"),i.fadeIn("slow"),n.attr("value","S'abonner"),n.click(function(){popinSubscribeAlert()}))}function popinSubscribeAlertCallback(e){var i=$(".alert-box"),n=$(i.find("#popinMessage")[0]),t=$(i.find("#newsSubButton")[0]);switch(e.status){case"OK":n.html("Inscription réussie."),n.addClass("success"),n.fadeIn("slow"),i.delay(2500).fadeOut("slow");break;case"NOK":n.html("Une erreur est survenue lors de votre inscription."),n.addClass("error"),n.fadeIn("slow");break;case"EXIST":n.html("Vous êtes déjà inscrit"),n.addClass("error"),n.fadeIn("slow")}t.attr("value","S'abonner"),t.click(function(){popinSubscribeAlert()})}void 0===FTVi.Popin&&(FTVi.Popin={}),FTVi.Popin.returns=new Array,FTVi.Popin.nbCallbackCalled=0,FTVi.Popin.nbSubscribe=0,FTVi.Popin.generate=popinGenerate,FTVi.Popin.generateNewsletter=popinGenerateNewsletter,FTVi.Popin.generateAlert=popinGenerateAlert,$(document).ready(function(){FTVi.Popin.generate()}),document.dispatchEvent(new CustomEvent("FTVi::Popin::ready",{bubbles:!0}))}(jQuery,window,document,FTVi);